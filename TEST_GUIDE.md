# 테스트 가이드

## 1. 환경 설정

### 패키지 설치
```bash
pip install -r requirements.txt
```

### 환경 변수 설정
1. `.env.example` 파일을 `.env`로 복사
2. Google Gemini API 키 발급: https://makersuite.google.com/app/apikey
3. `.env` 파일에 API 키 입력:
   ```
   GOOGLE_API_KEY=발급받은_API_키
   ```

## 2. 테스트 영상 준비

### 필요한 영상 파일:
- **형식**: `.mp4` 파일
- **내용**: 입모양이 잘 보이는 얼굴 영상
- **요구사항**:
  - 얼굴이 정면을 향하고 있어야 함
  - 입이 명확하게 보여야 함
  - MediaPipe가 얼굴을 인식할 수 있어야 함

### 영상 업로드 위치:
- **Gradio 웹 인터페이스 사용 시**: 웹 페이지에서 직접 업로드
- **프로그램 실행 시**: `AI_BE` 폴더 내 아무 곳에나 저장 (프로그램이 자동으로 `uploaded_videos/` 폴더로 복사)

## 3. 실행 방법

### 애플리케이션 실행
```bash
cd AI_BE
python ai_setence_tts_app.py
```

실행 후 터미널에 표시되는 URL (예: `http://127.0.0.1:7860`)로 접속

### 웹 인터페이스 사용
1. 브라우저에서 URL 접속
2. "입모양 영상 업로드(.mp4)" 섹션에 영상 파일 업로드
3. "복원하기" 버튼 클릭
4. 결과 확인:
   - **예측된 의도**: JSON 형식의 의도 태그들
   - **복원된 문장**: Gemini가 생성한 자연어 문장
   - **생성된 음성**: TTS로 생성된 MP3 파일

## 4. 생성되는 파일들

프로그램 실행 시 자동으로 생성되는 폴더:
- `uploaded_videos/`: 업로드된 원본 영상
- `tmp_video/`: 전처리된 입 영역만 crop된 영상
- `tmp_npy/`: 모델 입력용 numpy 배열 파일
- `tts_outputs/`: 생성된 TTS 오디오 파일

## 5. 문제 해결

### 입 인식 실패
- 얼굴이 정면을 향하고 있는지 확인
- 조명이 충분한지 확인
- 영상 품질 확인

### API 키 오류
- `.env` 파일이 올바른 위치에 있는지 확인
- API 키가 올바르게 입력되었는지 확인
- Gemini API 할당량 확인

